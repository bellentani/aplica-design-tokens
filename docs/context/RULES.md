# Project Rules & Constitution

> **Status**: Active  
> **Applicability**: All contributors (human and AI)

## 1. Language Rules (Non-Negotiable)

**CRITICAL:** All code and documentation in this repository must be in **English** for LLM compatibility and international use.

1. **All code comments MUST be in English**
   - Inline comments, block comments, JSDoc
   - Error messages and console output
   - Test descriptions and assertions

2. **All documentation in context and for agents MUST be in English**
   - Files under `docs/context/`
   - README, AI_CONTEXT.md
   - Technical specs referenced by agents
   - Commit messages and PR descriptions

3. **Variable and function names**
   - Must be descriptive and in English.

**Note:** User-facing docs under `docs/pt-br/` and `docs/en/` may be in Portuguese or English respectively; the **context** (agent-facing) is English.

## 2. Code Style & Standards

- **Module system**: Use ES Modules (`.mjs`) when scripts exist.
- **Documentation**: Use JSDoc for function documentation.
- **Variables**: Prefer `const` over `let`. Avoid `var`.
- **Naming**: Descriptive names; no single-letter variables except in obvious loops.

## 3. Architecture & Source of Truth

This repository is a **reference** for token architecture. There is no theme generator or build pipeline here.

- **Data**: `data/aplica-theme/` and `data/aplica-theme-with-extensions/` are the source of truth for consumable tokens (Tokens Studio / Figma). They are not auto-generated by this repo.
- **Documentation**: `docs/pt-br/` and `docs/en/` are the source for architecture and guides. Theme structure reference: docs/#07 (pt-br and en).
- **Constraint**: Do not assume or document builder-only concepts (e.g. `dynamic-themes/scripts`, `npm run build:themes`, `sync:architecture`) as if they existed in this repo. They belong to another project (see `to-update/` if present).

## 4. File Structure & Boundaries

- **`data/`**: Token sets for Tokens Studio. `aplica-theme` = resolved values; `aplica-theme-with-extensions` = same structure with Tokens Studio Extensions (e.g. dark mode via modify).
- **`docs/`**: Architecture and user docs (pt-br, en) and `docs/context/` for agent rules and index.
- **Protected control files**: Do not delete or overwrite `data/aplica-theme/$metadata.json`, `data/aplica-theme/$themes.json` (or the same in `aplica-theme-with-extensions`) without explicit intent; they define token set order and theme combinations for Tokens Studio.

## 5. Release & Versioning

- **Root [CHANGELOG.md](../../CHANGELOG.md):** Clear, direct summary of main changes per version (no long file lists). Use Keep a Changelog format (Added, Changed, Removed, etc.).
- **Detailed [docs/context/CHANGELOG_DETAILED.md](CHANGELOG_DETAILED.md):** Descriptive changelog for AI; update when implementing features or releasing so future agents can verify what was done (summary, features, files/areas touched, decisions).
- Any CHANGELOG in this repo describes changes to **this** repo (documentation and data structure), not Aplica Theme Engine versions.

## 6. Agent Behavior

- **Confirm before implementing**: Propose solution and implementation strategy before editing files. Wait for explicit user confirmation. See [AGENT_GUIDE.md](AGENT_GUIDE.md).
- **No hallucinations**: Do not invent build steps, generators, or configs that do not exist here. Follow what is described in [AI_CONTEXT.md](../../AI_CONTEXT.md) and [SUMMARY.md](SUMMARY.md).
- **Context first**: Before suggesting changes, verify the current structure (theme structure doc #07, INDEX).
